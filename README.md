# Node.js

node.js란 자바스크립트를 통해 서버환경을 구성하고 서버사이드 언어로 사용할 수 있도록 만들어진 스크립트 언어입니다.

프론트앤드 개발 시 javascript와 jquery을 자주 사용하였는데 node js을 처음 쓰게되면서 느꼈던 감정과 경험을 공유하겠습니다.

먼저, nodejs는 분명 javascript이지만 기본적으로 서버를 위해 사용하기에는 처음 접하는 이들이나 저처럼 비전공자에게는 배우기까지 어려움이 있다고 생각합니다.  nodejs에 대한 정보는 이미 풍부한 자료와 레퍼런스가 있겠지만 제가 느꼈던 어려움을 쉽게 다가갈 수 있도록 이야기식으로 설명하는 것이 이 글의 목적입니다.

그러면 nodejs를 어떻게 사용하는가? 먼저 nodejs는 설치를 기본으로 합니다. javascript처럼 언어를 작성하는 것이 아닌 nodejs를 설치하여 서버언어로서 사용될 수 있도록 컴퓨터에 설정이 되어야 하기 때문입니다. 

https://nodejs.org/ko/

윈도우를 기준으로 위 사이트에 가셔서 nodejs파일을 다운로드하고 설치하시면 됩니다.

설치가 완료되었으면 우리는 node.js command prompt을 통해 npm명령어를 사용할 수 있습니다. 물론 설치를 하면서 cmd(명령 프롬프트) 창에서도 path가 자동으로 등록되기 때문에 npm명령어를 사용 할 수 있습니다.

자! 이제 우리는 nodejs를 사용할 준비는 끝입니다. 여기까지는 쉽게 따라오셨을 겁니다.

이제 nodejs를 이용하여 프로젝트를 생성해야겠죠? 원하는 위치에 폴더를 생성하겠습니다. 폴더를 생성하였으면 명령프롬프트 창에서 해당 폴더로 이동 후 명령어로 `npm init`  입력합니다.  이 명령어는 이제 이 폴더는 nodejs project의 폴더로 지정하고 초기 환경설정을 하게 됩니다. 그 결과 package.json파일이 생성되게 됩니다.

우리는 이제 프로젝트의 목적에 따라 어떤 모듈을 사용할 것인지 정하여야 합니다. 왜냐하면 프로젝트 진행 중 모듈을 추가하여 붙이는 것도 할 수 있지만 최초에 필요한 것들을 최대한 정리하고 세팅해놓는 것이 더 효율적이라고 저는 생각합니다.

목적이 구체화 되었으면, 필요한 모듈들을 `npm install 모듈명 --옵션` 명령어를 통해 불러옵니다. 이 때 사용되는 것이 package.json입니다. 이 파일은 사실 모듈을 불러오는 것외에도 너무너무 중요합니다. nodejs에 대한 환경설정파일이기 때문입니다. 이름, 목적, 설명, 모듈정보 등 다양한 정보들이 있습니다. 이에 대한 자세한 설명은 아래 링크를 첨부하니 참고하시면 좋을 것 같습니다.

https://programmingsummaries.tistory.com/385

필요한 모듈의 설치 방법은 검색하면 금방 나오니 스스로 찾아보시면 될 것 같습니다 ^^

저는 express모듈과 socket모듈 그리고 babel을 사용해보았습니다.

express는 nodejs 웹프레임워크로 웹서버를 구성하고 라우팅 등 기능을 이용하여 웹어플리케이션을 만들 때 사용됩니다.

socket은 양방향 통신을 지원하는 모듈로 실시간 채팅을 위해서 사용되었습니다.

마지막으로 babel은 위의 2개의 모듈과 조금 다릅니다. 위에 모듈은 code안에서 사용하는 형태지만 babel의 경우에는 ECMAScript를 사용할 때 지원하지 않는 브라우저들을 위해 순수javascript 코드로 컴파일 시켜주는 도구로 생각하면 됩니다. 그래서 사용법 또한 명령프롬프트 창에서 명령어를 통해서 작동하니 이 차이점 알고 계시면 좀 더 수월하실 것 입니다.

그리고 이거는 제가 2일 동안 해결방안을 못찾다가 찾은 것인데, 혹시 구글 클라우드 플랫폼에서 소켓을 사용하면 소켓연결이 끊어지는 현상이 발생합니다.  이 때 해결방안으로 app.yaml 파일에

```
runtime: nodejs
env: flex
manual_scaling: 
    instances: 1
network: 
    session_affinity: true
```

메뉴얼 스케일링과 네트워크 설정 값으로 위에와 같이 넣어주시면 해결이 됩니다.

app.yaml파일은 구글 클라우드 플랫폼 서비스 이용시 최초 읽게되는 환경설정 파일입니다. 

혹시 구글 클라우드 플랫폼 서비스를 이용하시려 하시면 https://bcho.tistory.com/1125 이 사이트를 보시면 좋습니다 ^^ 

이리저리 처음 올리는 글이라 주저리 떠들었는데 도움이 되었으면 합니다. 지금은 미숙하지만 앞으로도 계속적으로 배우는 것들에 대해서 올릴테니 잘 봐주셨으면 좋겠습니다.